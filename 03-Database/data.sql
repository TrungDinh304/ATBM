--alter session set "_ORACLE_SCRIPT" = TRUE;
CREATE USER ADMIN1 IDENTIFIED BY 123; 

GRANT DBA TO ADMIN1; 
GRANT EXECUTE ANY PROCEDURE TO ADMIN1; 
GRANT CREATE SESSION TO ADMIN1 CONTAINER = ALL; 
GRANT CONNECT TO ADMIN1 WITH ADMIN OPTION;
GRANT SELECT ANY DICTIONARY TO ADMIN1;
GRANT CREATE SESSION, CREATE VIEW, ALTER SESSION, CREATE SEQUENCE TO ADMIN1;
GRANT CREATE SYNONYM, CREATE DATABASE LINK, RESOURCE, UNLIMITED TABLESPACE TO ADMIN1;
GRANT CREATE USER, CREATE ROLE, ALTER USER, ALTER ANY ROLE, DROP USER, DROP ANY ROLE TO ADMIN1;
GRANT CREATE TRIGGER TO ADMIN1;
GRANT EXECUTE ON SYS.DBMS_SESSION TO ADMIN1;
GRANT EXECUTE ON DBMS_CRYPTO TO ADMIN1;


--DROP FK
--ALTER TABLE admin1.X_DANGKY DROP CONSTRAINT FK_X_DANGKY_PHANCONG;
--ALTER TABLE admin1.X_DANGKY DROP CONSTRAINT FK_X_DANGKY_SINHVIEN;
--ALTER TABLE admin1.X_PHANCONG DROP CONSTRAINT FK_X_PHANCONG_KHMO;
--ALTER TABLE admin1.X_PHANCONG DROP CONSTRAINT FK_X_PHANCONG_NHANSU;
--ALTER TABLE admin1.X_KHMO DROP CONSTRAINT FK_X_KHMO_HOCPHAN;
--ALTER TABLE admin1.X_NHANSU DROP CONSTRAINT FK_X_NHANSU_DONVI;
--ALTER TABLE admin1.X_HOCPHAN DROP CONSTRAINT FK_X_HOCPHAN_DONVI;
--ALTER TABLE admin1.X_DONVI DROP CONSTRAINT FK_X_DONVI_NHANSU;
--
--DROP TABLE admin1.X_NHANSU;
--DROP TABLE admin1.X_DONVI;
--DROP TABLE admin1.X_DANGKY;
--DROP TABLE admin1.X_SINHVIEN;
--DROP TABLE admin1.X_PHANCONG;
--DROP TABLE admin1.X_KHMO;
--DROP TABLE admin1.X_HOCPHAN;

CREATE TABLE admin1.X_NHANSU (
    MANV VARCHAR(10), 
    HOTEN NVARCHAR2(50), 
    PHAI NVARCHAR2(10), 
    NGSINH DATE, 
    PHUCAP INT, 
    DT VARCHAR(12), 
    VAITRO NVARCHAR2(50), 
    MADV VARCHAR(10),
    PRIMARY KEY(MANV)
);

CREATE TABLE admin1.X_SINHVIEN (
    MASV VARCHAR(10), 
    HOTEN NVARCHAR2(50), 
    PHAI NVARCHAR2(10), 
    NGSINH DATE,
    DCHI NVARCHAR2(100), 
    DT VARCHAR(12), 
    MACT VARCHAR(10), 
    MANGANH VARCHAR(10), 
    SOTCTL INT, 
    DTBTL FLOAT,
    PRIMARY KEY(MASV)
);

CREATE TABLE admin1.X_DONVI (
    MADV VARCHAR(10), 
    TENDV NVARCHAR2(50), 
    TRGDV VARCHAR(10),
    PRIMARY KEY(MADV)
);

CREATE TABLE admin1.X_HOCPHAN (
    MAHP VARCHAR(10), 
    TENHP NVARCHAR2(50), 
    SOTC INT, 
    STLT INT, 
    STTH INT, 
    SOSVTD INT, 
    MADV VARCHAR(10),
    PRIMARY KEY(MAHP)
);

CREATE TABLE admin1.X_KHMO (
    MAHP VARCHAR(10), 
    HK CHAR(1), 
    NAM CHAR(4), 
    MACT VARCHAR(10),
    PRIMARY KEY(MAHP, HK, NAM, MACT)
);

CREATE TABLE admin1.X_PHANCONG (
    MAGV VARCHAR(10), 
    MAHP VARCHAR(10), 
    HK CHAR(1), 
    NAM CHAR(4),
    MACT VARCHAR(10),
    PRIMARY KEY(MAGV, MAHP, HK, NAM, MACT)
);

CREATE TABLE admin1.X_DANGKY (
    MASV VARCHAR(10), 
    MAGV VARCHAR(10), 
    MAHP VARCHAR(10), 
    HK CHAR(1), 
    NAM CHAR(4),
    MACT VARCHAR(10), 
    DIEMTH FLOAT, 
    DIEMQT FLOAT, 
    DIEMCK FLOAT, 
    DIEMTK FLOAT,
    PRIMARY KEY(MASV, MAGV, MAHP, HK, NAM, MACT)
);  

--TAO FK
--TRUONG DON VI LA NGUOI TRONG NHAN SU
ALTER TABLE admin1.X_DONVI
ADD
    CONSTRAINT FK_X_DONVI_NHANSU
    FOREIGN KEY (TRGDV)
    REFERENCES admin1.X_NHANSU;
--MA DON VI TRONG HOC PHAN
ALTER TABLE admin1.X_HOCPHAN
ADD
    CONSTRAINT FK_X_HOCPHAN_DONVI
    FOREIGN KEY (MADV)
    REFERENCES admin1.X_DONVI;
--MA DON VI TRONG NHAN SU
ALTER TABLE admin1.X_NHANSU
ADD
    CONSTRAINT FK_X_NHANSU_DONVI
    FOREIGN KEY (MADV)
    REFERENCES admin1.X_DONVI;
--MA HOC PHAN TRONG KHMO
ALTER TABLE admin1.X_KHMO
ADD
    CONSTRAINT FK_X_KHMO_HOCPHAN
    FOREIGN KEY (MAHP)
    REFERENCES admin1.X_HOCPHAN;
--MA GV TRONG PHAN CONG
ALTER TABLE admin1.X_PHANCONG
ADD
    CONSTRAINT FK_X_PHANCONG_NHANSU
    FOREIGN KEY (MAGV)
    REFERENCES admin1.X_NHANSU;
--MAHP, HK, NAM, MACT TRONG PHAN CONG
ALTER TABLE admin1.X_PHANCONG
ADD
    CONSTRAINT FK_X_PHANCONG_KHMO
    FOREIGN KEY (MAHP, HK, NAM, MACT)
    REFERENCES admin1.X_KHMO;
--MASV TRONG DANG KY
ALTER TABLE admin1.X_DANGKY
ADD
    CONSTRAINT FK_X_DANGKY_SINHVIEN
    FOREIGN KEY (MASV)
    REFERENCES admin1.X_SINHVIEN;
--MAGV, MAHP, HK, NAM, MACT TRONG DANG KY
ALTER TABLE admin1.X_DANGKY
ADD
    CONSTRAINT FK_X_DANGKY_PHANCONG
    FOREIGN KEY (MAGV, MAHP, HK, NAM, MACT)
    REFERENCES admin1.X_PHANCONG;
    
--INSERT DATA
INSERT INTO admin1.X_SINHVIEN VALUES('SV01', 'Nguyễn Thị Hương', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 'Hồ Chí Minh', '0123456789', 'CQ', 'CNTT', 80, 3.2);
INSERT INTO admin1.X_SINHVIEN VALUES('SV02', 'Trần Văn Minh', 'Nam', TO_DATE('15-05-2001','DD-MM-YYYY'), 'Hà Nội', '0987654321', 'CQ', 'CNTT', 75, 3.5);
INSERT INTO admin1.X_SINHVIEN VALUES('SV03', 'Lê Thị Thuận', 'Nữ', TO_DATE('20-03-1999','DD-MM-YYYY'), 'Đà Nẵng', '0765432109', 'CQ', 'CNTT', 70, 3.0);
INSERT INTO admin1.X_SINHVIEN VALUES('SV04', 'Phạm Văn Hải', 'Nam', TO_DATE('10-11-1998','DD-MM-YYYY'), 'Cần Thơ', '0345678901', 'CQ', 'CNTT', 85, 3.8);
INSERT INTO admin1.X_SINHVIEN VALUES('SV05', 'Hoàng Thị Lan', 'Nữ', TO_DATE('05-09-2002','DD-MM-YYYY'), 'Hải Phòng', '0912345678', 'CQ', 'CNTT', 78, 3.3);
INSERT INTO admin1.X_SINHVIEN VALUES('SV06', 'Nguyễn Văn Tùng', 'Nam', TO_DATE('25-07-2000','DD-MM-YYYY'), 'Huế', '0654321098', 'CQ', 'CNTT', 72, 3.1);
INSERT INTO admin1.X_SINHVIEN VALUES('SV07', 'Trần Thị Mai', 'Nữ', TO_DATE('12-12-1997','DD-MM-YYYY'), 'Hà Nội', '0789456123', 'CQ', 'CNTT', 88, 3.9);
INSERT INTO admin1.X_SINHVIEN VALUES('SV08', 'Lê Văn Đức', 'Nam', TO_DATE('30-04-2003','DD-MM-YYYY'), 'Đà Lạt', '0234567890', 'CQ', 'CNTT', 68, 2.9);
INSERT INTO admin1.X_SINHVIEN VALUES('SV09', 'Phạm Thị Hạnh', 'Nữ', TO_DATE('18-08-2001','DD-MM-YYYY'), 'Nha Trang', '0890123456', 'CQ', 'CNTT', 82, 3.6);
INSERT INTO admin1.X_SINHVIEN VALUES('SV10', 'Hoàng Văn Quang', 'Nam', TO_DATE('03-06-1999','DD-MM-YYYY'), 'Quảng Ninh', '0543210987', 'CQ', 'CNTT', 76, 3.4);


INSERT INTO admin1.X_DONVI
VALUES('VPK', 'Văn phòng khoa', NULL);
INSERT INTO admin1.X_DONVI
VALUES('HTTT', 'Bộ môn HTTT', NULL);
INSERT INTO admin1.X_DONVI
VALUES('CNPM', 'Bộ môn CNPM', NULL);
INSERT INTO admin1.X_DONVI
VALUES('KHMT', 'Bộ môn KHMT', NULL);
INSERT INTO admin1.X_DONVI
VALUES('CNTT', 'Bộ môn CNTT', NULL);
INSERT INTO admin1.X_DONVI
VALUES('TGMT', 'Bộ môn TGMT', NULL);
INSERT INTO admin1.X_DONVI
VALUES('MMT', 'Bộ môn MMT và Viễn thông', NULL);

INSERT INTO admin1.X_NHANSU VALUES('NV01', 'Nguyễn Hiếu Học', 'Nam', TO_DATE('05-03-1998','DD-MM-YYYY'), 2000, '0987654321', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV02', 'Trần Minh Giang', 'Nam', TO_DATE('10-10-1999','DD-MM-YYYY'), 2100, '0123456789', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV03', 'Bùi Chí Thành', 'Nam', TO_DATE('15-05-2000','DD-MM-YYYY'), 2200, '0765432109', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV04', 'Lê Ðức Phong', 'Nam', TO_DATE('20-12-1997','DD-MM-YYYY'), 2300, '0345678901', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV05', 'Trịnh Ðông Nguyên', 'Nam', TO_DATE('25-08-1998','DD-MM-YYYY'), 2400, '0912345678', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV06', 'Nguyễn Kim Mai', 'Nữ', TO_DATE('30-04-1999','DD-MM-YYYY'), 2500, '0654321098', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV07', 'Trần Thu Nguyệt', 'Nữ', TO_DATE('03-11-2001','DD-MM-YYYY'), 2600, '0789456123', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV08', 'Bùi Ngọc Ðiệp', 'Nữ', TO_DATE('08-07-2002','DD-MM-YYYY'), 2700, '0234567890', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV09', 'Lê Diệu Hằng', 'Nữ', TO_DATE('12-09-2000','DD-MM-YYYY'), 2800, '0890123456', 'Nhan vien co ban', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('NV10', 'Trịnh Vân Thúy', 'Nữ', TO_DATE('18-06-1998','DD-MM-YYYY'), 2900, '0543210987', 'Nhan vien co ban', 'VPK');


INSERT INTO admin1.X_NHANSU VALUES('GV01', 'Nguyễn Văn An', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV02', 'Trần Thị Bình', 'Nữ', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0987654321', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV03', 'Lê Văn Cường', 'Nam', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0912345678', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV04', 'Phạm Thị Dung', 'Nữ', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0976543210', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV05', 'Hoàng Văn Đức', 'Nam', TO_DATE('05-07-1997','DD-MM-YYYY'), 1050, '0898765432', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV06', 'Nguyễn Thị Hà', 'Nữ', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0965432109', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV07', 'Trần Văn Khánh', 'Nam', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV08', 'Lê Thị Lan', 'Nữ', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV09', 'Phạm Văn Mạnh', 'Nam', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV10', 'Hoàng Thị Nga', 'Nữ', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('GV11', 'Nguyễn Văn Đạt', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV12', 'Trần Thị Eo', 'Nữ', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV13', 'Lê Văn Fai', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV14', 'Phạm Thị Gấu', 'Nữ', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV15', 'Hoàng Văn Hùng', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV16', 'Nguyễn Thị Ia', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV17', 'Trần Văn Khoai', 'Nam', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV18', 'Lê Thị Lúa', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV19', 'Phạm Văn Mèo', 'Nam', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV20', 'Hoàng Thị Nhi', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('GV21', 'Nguyễn Văn Oanh', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV22', 'Trần Thị Phượng', 'Nữ', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV23', 'Lê Văn Quân', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV24', 'Phạm Thị Rồng', 'Nữ', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV25', 'Hoàng Văn Sơn', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV26', 'Nguyễn Thị Tâm', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV27', 'Trần Văn Uyên', 'Nam', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV28', 'Lê Thị Vân', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV29', 'Phạm Văn Xanh', 'Nam', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV30', 'Hoàng Thị Yến', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('GV31', 'Nguyễn Văn Zai', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV32', 'Trần Thị Xinh', 'Nữ', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV33', 'Lê Văn Yên', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV34', 'Phạm Thị Zụ', 'Nữ', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV35', 'Hoàng Văn Xoan', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV36', 'Nguyễn Thị Uyên', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV37', 'Trần Văn Tài', 'Nam', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV38', 'Lê Thị Sương', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV39', 'Phạm Văn Quý', 'Nam', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV40', 'Hoàng Thị Phượng', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('GV41', 'Nguyễn Văn Quang', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV42', 'Trần Thị Rạng', 'Nữ', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV43', 'Lê Văn Sáng', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV44', 'Phạm Thị Tâm', 'Nữ', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV45', 'Hoàng Văn Uyên', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV46', 'Nguyễn Thị Vân', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV47', 'Trần Văn Xoan', 'Nam', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV48', 'Lê Thị Yến', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV49', 'Phạm Văn Zai', 'Nam', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV50', 'Hoàng Thị Xinh', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('GV51', 'Nguyễn Tùng Lâm', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV52', 'Trần Hòa Thái', 'Nam', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV53', 'Bùi Công Lập', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV54', 'Lê Kim Hoàng', 'Nam', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV55', 'Trịnh Huy Hoàng', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV56', 'Nguyễn Thanh Trúc', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV57', 'Trần Mỹ Nga', 'Nữ', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV58', 'Bùi Diễm My', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV59', 'Lê Hà Liên', 'Nữ', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV60', 'Trịnh Kiều Loan', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('GV61', 'Nguyễn Khánh Hoàn', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV62', 'Trần Gia Hùng', 'Nam', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV63', 'Bùi Đăng Quang', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV64', 'Lê Lương Quyền', 'Nam', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV65', 'Trịnh Duy Khang', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV66', 'Nguyễn Phương Mai', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV67', 'Trần Vân Trinh', 'Nữ', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV68', 'Bùi Vân Nhi', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV69', 'Lê Hoài Trang', 'Nữ', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV70', 'Trịnh Ðài Trang', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV71', 'Nguyễn Trọng Dũng', 'Nam', TO_DATE('03-07-1991','DD-MM-YYYY'), 1050, '0912345678', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV72', 'Trần Hán Lâm', 'Nam', TO_DATE('20-09-1988','DD-MM-YYYY'), 1300, '0987654321', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV73', 'Bùi Thành Hòa', 'Nam', TO_DATE('15-05-1995','DD-MM-YYYY'), 1200, '0976543210', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV74', 'Lê Minh Hòa', 'Nam', TO_DATE('10-03-1992','DD-MM-YYYY'), 1100, '0965432109', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV75', 'Trịnh Quốc Trung', 'Nam', TO_DATE('25-12-1993','DD-MM-YYYY'), 1150, '0954321098', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV76', 'Nguyễn Thục Trinh', 'Nữ', TO_DATE('18-08-1985','DD-MM-YYYY'), 1250, '0943210987', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV77', 'Trần Thu Ngân', 'Nữ', TO_DATE('30-04-1990','DD-MM-YYYY'), 1350, '0932109876', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV78', 'Bùi Quỳnh Giang', 'Nữ', TO_DATE('08-11-1983','DD-MM-YYYY'), 1150, '0921098765', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV79', 'Lê Bạch Tuyết', 'Nữ', TO_DATE('12-06-1998','DD-MM-YYYY'), 1050, '0910987654', 'Giang vien', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GV80', 'Trịnh Ánh Mai', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0909876543', 'Giang vien', 'VPK');


INSERT INTO admin1.X_NHANSU VALUES('GI01', 'Nguyễn Quốc Minh', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI02', 'Trần Hữu Thiện', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI03', 'Bùi Gia Vinh', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI04', 'Lê Chiêu Quân', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI05', 'Trịnh Anh Khôi', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI06', 'Nguyễn Quỳnh Nữ', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI07', 'Trần Thúy Hằng', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI08', 'Bùi Kiều Thu', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI09', 'Lê Thiên Nga', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');
INSERT INTO admin1.X_NHANSU VALUES('GI10', 'Trịnh Thủy Trang', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Giao vu', 'VPK');

INSERT INTO admin1.X_NHANSU VALUES('TDV01', 'Nguyễn Bình An', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong don vi', 'HTTT');
INSERT INTO admin1.X_NHANSU VALUES('TDV02', 'Trần Mạnh Thiện', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong don vi', 'CNPM');
INSERT INTO admin1.X_NHANSU VALUES('TDV03', 'Bùi Ðình Ngân', 'Nam', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong don vi', 'KHMT');
INSERT INTO admin1.X_NHANSU VALUES('TDV04', 'Nguyễn Thúy Mai', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong don vi', 'CNTT');
INSERT INTO admin1.X_NHANSU VALUES('TDV05', 'Trần Linh Giang', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong don vi', 'TGMT');
INSERT INTO admin1.X_NHANSU VALUES('TDV06', 'Bùi Mai Hiền', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong don vi', 'MMT');
INSERT INTO admin1.X_NHANSU VALUES('TK', 'Lê Giáng Ngọc', 'Nữ', TO_DATE('01-01-2000','DD-MM-YYYY'), 1000, '0123456789', 'Truong khoa', 'VPK');

UPDATE admin1.X_DONVI SET TRGDV = 'TDV01' WHERE MADV = 'HTTT';
UPDATE admin1.X_DONVI SET TRGDV = 'TDV02' WHERE MADV = 'CNPM';
UPDATE admin1.X_DONVI SET TRGDV = 'TDV03' WHERE MADV = 'KHMT';
UPDATE admin1.X_DONVI SET TRGDV = 'TDV04' WHERE MADV = 'CNTT';
UPDATE admin1.X_DONVI SET TRGDV = 'TDV05' WHERE MADV = 'TGMT';
UPDATE admin1.X_DONVI SET TRGDV = 'TDV06' WHERE MADV = 'MMT';
UPDATE admin1.X_DONVI SET TRGDV = 'TK' WHERE MADV = 'VPK';

INSERT INTO admin1.X_HOCPHAN VALUES('HTTT01', 'An toàn bảo mật', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('HTTT02', 'Cơ sở dữ liệu', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('HTTT03', 'Hệ thống thông tin doanh nghiệp', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('HTTT04', 'Chuyên đề hệ quản trị', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('HTTT05', 'Cơ sở dữ liệu nâng cao', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('HTTT06', 'Phân tích thiết kế HTTT', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('HTTT07', 'Hệ điều hành', 4, 3, 1, 100, 'HTTT');
INSERT INTO admin1.X_HOCPHAN VALUES('CNPM01', 'Nhập môn CNPM', 4, 3, 1, 100, 'CNPM');
INSERT INTO admin1.X_HOCPHAN VALUES('CNTT01', 'Nhập môn CNTT', 4, 3, 1, 100, 'CNTT');
INSERT INTO admin1.X_HOCPHAN VALUES('VPK01', 'Toan cao cap', 4, 3, 1, 100, 'VPK');
INSERT INTO admin1.X_HOCPHAN VALUES('VPK02', 'Toan cao cap nang cao', 4, 3, 1, 100, 'VPK');
INSERT INTO admin1.X_HOCPHAN VALUES('VPK03', 'Vi tích phân 1B', 4, 3, 1, 100, 'VPK');
INSERT INTO admin1.X_HOCPHAN VALUES('VPK04', 'Vi tích phân 2B', 4, 3, 1, 100, 'VPK');

INSERT INTO admin1.X_KHMO VALUES('HTTT01', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('HTTT01', '2', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('HTTT01', '1', '2024', 'CLC');
INSERT INTO admin1.X_KHMO VALUES('HTTT01', '1', '2024', 'CTTT');
INSERT INTO admin1.X_KHMO VALUES('HTTT02', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('HTTT02', '1', '2024', 'CLC');
INSERT INTO admin1.X_KHMO VALUES('HTTT02', '1', '2024', 'CTTT');
INSERT INTO admin1.X_KHMO VALUES('HTTT03', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('HTTT03', '1', '2024', 'CLC');
INSERT INTO admin1.X_KHMO VALUES('HTTT03', '1', '2024', 'CTTT');
INSERT INTO admin1.X_KHMO VALUES('VPK01', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK02', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK03', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK04', '1', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK01', '2', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK02', '2', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK03', '2', '2024', 'CQ');
INSERT INTO admin1.X_KHMO VALUES('VPK04', '2', '2024', 'CQ');

INSERT INTO admin1.X_PHANCONG VALUES('GV01', 'HTTT01',  '1', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES('GV01', 'HTTT01',  '2', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES('GV02', 'HTTT01',  '2', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES('GV01', 'HTTT01',  '1', '2024', 'CLC');
INSERT INTO admin1.X_PHANCONG VALUES('GV01', 'HTTT01',  '1', '2024', 'CTTT');
INSERT INTO admin1.X_PHANCONG VALUES('GV02', 'HTTT01',  '1', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES('GV02', 'HTTT01',  '1', '2024', 'CLC');
INSERT INTO admin1.X_PHANCONG VALUES('GV02', 'HTTT01',  '1', '2024', 'CTTT');
INSERT INTO admin1.X_PHANCONG VALUES('GV03', 'HTTT01',  '1', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES('GV03', 'HTTT01',  '1', '2024', 'CLC');
INSERT INTO admin1.X_PHANCONG VALUES('GV03', 'HTTT01',  '1', '2024', 'CTTT');
INSERT INTO admin1.X_PHANCONG VALUES('GV61', 'VPK01',  '1', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES('TK', 'VPK01',  '1', '2024', 'CQ');

INSERT INTO admin1.X_PHANCONG VALUES ('TDV01', 'HTTT02', '1', '2024', 'CTTT');
INSERT INTO admin1.X_PHANCONG VALUES ('TDV01', 'HTTT03', '1', '2024', 'CQ');
INSERT INTO admin1.X_PHANCONG VALUES ('TDV01', 'HTTT03', '1', '2024', 'CLC');
INSERT INTO admin1.X_PHANCONG VALUES ('TDV01', 'HTTT03', '1', '2024', 'CTTT');

INSERT INTO admin1.X_DANGKY VALUES('SV01', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV02', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV03', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV04', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV05', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV06', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV07', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV08', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV09', 'GV01', 'HTTT01',  '1', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV10', 'GV01', 'HTTT01',  '2', '2024', 'CQ', 8, 8, 8, 8);
INSERT INTO admin1.X_DANGKY VALUES('SV06', 'TK', 'VPK01',  '1', '2024', 'CQ', 0, 0, 0, 0);
INSERT INTO admin1.X_DANGKY VALUES('SV07', 'TK', 'VPK01',  '1', '2024', 'CQ', 0, 0, 0, 0);
INSERT INTO admin1.X_DANGKY VALUES('SV08', 'TK', 'VPK01',  '1', '2024', 'CQ', 0, 0, 0, 0);
INSERT INTO admin1.X_DANGKY VALUES('SV09', 'TK', 'VPK01',  '1', '2024', 'CQ', 0, 0, 0, 0);
INSERT INTO admin1.X_DANGKY VALUES('SV10', 'TK', 'VPK01',  '1', '2024', 'CQ', 0, 0, 0, 0);

INSERT INTO admin1.X_DANGKY VALUES ('SV01', 'TDV01', 'HTTT02', '1', '2024', 'CTTT', 8.0, 7.5, 7.0, 7.5);
INSERT INTO admin1.X_DANGKY VALUES ('SV02', 'TDV01', 'HTTT02', '1', '2024', 'CTTT', 9.0, 8.0, 8.5, 8.5);
INSERT INTO admin1.X_DANGKY VALUES ('SV03', 'TDV01', 'HTTT03', '1', '2024', 'CQ', 7.5, 7.0, 7.0, 7.2);
INSERT INTO admin1.X_DANGKY VALUES ('SV01', 'TDV01', 'HTTT03', '1', '2024', 'CLC', 8.5, 8.0, 8.0, 8.2);
INSERT INTO admin1.X_DANGKY VALUES ('SV02', 'TDV01', 'HTTT03', '1', '2024', 'CTTT', 9.0, 8.5, 8.5, 8.7);

UPDATE admin1.X_SINHVIEN sv
            SET sv.DTBTL = (
                select sum(dk.diemtk*hp.sotc)/sum(hp.sotc)
                FROM admin1.X_DANGKY dk join admin1.X_HOCPHAN hp on dk.mahp = hp.mahp
                WHERE dk.MASV = sv.masv
            );
            
update admin1.X_SINHVIEN sv
    set SOTCTL = (  select sum(hp.sotc)
                    from admin1.X_DANGKY dk join admin1.X_HOCPHAN hp on dk.mahp = hp.mahp
                    where sv.masv = dk.masv and dk.diemtk >= 5);
                    



-- Thêm dữ liệu vào bảng X_DANGKY

-- Kiểm tra dữ liệu
select * from admin1.X_SINHVIEN;
select * from admin1.X_DONVI;
select * from admin1.X_HOCPHAN;
select * from admin1.X_KHMO;
select * from admin1.X_PHANCONG;
select * from admin1.X_DANGKY;
select * from admin1.X_NHANSU;